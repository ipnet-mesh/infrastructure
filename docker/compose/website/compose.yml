services:

  website:
    image: ghcr.io/ipnet-mesh/website:latest
    container_name: website
    restart: unless-stopped
    networks:
      - proxy
    environment:
      - FLASK_ENV=production
      - FLASK_DEBUG=false
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.website.rule=Host(`beta.${IPNET_DOMAIN}`)"
      - "traefik.http.routers.website.entrypoints=websecure"
      - "traefik.http.routers.website.tls.certresolver=cloudflare"
      - "traefik.http.services.website.loadbalancer.server.port=5000"

networks:
  proxy:
    external: true
